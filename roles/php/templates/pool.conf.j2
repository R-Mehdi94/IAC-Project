# roles/php-fpm/templates/pool.conf.j2

[{{ pool.name }}]
user = {{ pool.user }}
group = {{ pool.group }}

# Écoute sur le socket Unix pour une connexion rapide avec Nginx
listen = {{ pool.listen }}

# Gestion des erreurs et logs
listen.owner = {{ pool.user }}
listen.group = {{ pool.group }}
listen.mode = 0660

 pm = dynamic
pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3

# Nettoyer l'environnement au cas où
env[HOSTNAME] = $HOSTNAME
env[PATH] = /usr/local/bin:/usr/bin:/bin
env[TMP] = /tmp